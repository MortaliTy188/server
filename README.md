## Описание проекта
Этот проект представляет собой серверную часть, реализованную на Node.js и Express.js. Сервер предназначен для управления аутентификацией пользователей, документами и комментариями. Он поддерживает различные API-запросы для выполнения CRUD операций (создание, чтение, обновление и удаление) с документами и комментариями, а также для аутентификации пользователей.


## Использованные технологии
- **Node.js**: Среда выполнения JavaScript на сервере.
- **Express.js**: Веб-фреймворк для Node.js, используемый для создания серверов и обработки HTTP-запросов.
- **Sequelize**: ORM для Node.js, используемый для работы с базой данных.
- **JWT (JSON Web Tokens)**: Используется для аутентификации и авторизации пользователей.
- **PostgreSQL**: Реляционная база данных, используемая для хранения данных.


# Установка
Для установки зависимостей проекта выполните:

```bash
npm install
```
# Запуск
Для запуска сервера используйте:

```bash
npm start
```
Сервер будет запущен на порту 3000.


# Структура проекта

## app.js
Основной файл сервера, где подключаются маршруты и запускается сервер.

## controllers/
Содержит контроллеры для обработки логики работы с данными.

- **authController.js**: Контроллер для аутентификации пользователей.
- **commentController.js**: Контроллер для управления комментариями.
- **documentController.js**: Контроллер для управления документами.

## models/
Содержит модели данных Sequelize.

- **userModel.js**: Модель пользователя.
- **commentModel.js**: Модель комментария.
- **documentModel.js**: Модель документа.

## routes/
Содержит маршруты для API.

- **authRoutes.js**: Маршруты для аутентификации.
- **commentRoutes.js**: Маршруты для комментариев.
- **documentRoutes.js**: Маршруты для документов.

## middlewares/
Содержит промежуточные обработки.

- **authenticateJWT.js**: Middleware для аутентификации JWT.


# Функционал

## Аутентификация

- **Регистрация нового пользователя**: Позволяет создать нового пользователя с уникальными учетными данными.
- **Вход пользователя с проверкой учетных данных**: Пользователь вводит свои учетные данные (например, логин и пароль), система проверяет их и возвращает JWT токен для доступа к защищенным маршрутам.
- **Генерация и проверка JWT токенов для защиты маршрутов**: Генерация JWT токена при успешном входе пользователя и проверка токена на защищенных маршрутах, чтобы убедиться в авторизации пользователя.

## Документы

- **Создание нового документа**: Возможность добавления нового документа в систему.
- **Получение списка всех документов**: Получение списка всех документов, доступных пользователю.
- **Получение конкретного документа по ID**: Получение одного конкретного документа по его уникальному идентификатору.
- **Обновление существующего документа**: Возможность редактировать или обновлять информацию о документе.
- **Удаление документа**: Удаление документа из системы.

## Комментарии

- **Добавление комментария к документу**: Возможность добавления комментария к конкретному документу для обсуждения или уточнений.
- **Получение комментариев для конкретного документа**: Получение всех комментариев, связанных с конкретным документом.

# Виды запросов

## Аутентификация

### Регистрация пользователя

- **Запрос**:

  - **Метод**: POST
  - **URL**: `/api/v1/Register`
  - **Тело запроса**:
    ```json
    {
      "name": "username",
      "password": "password"
    }
    ```
  
- **Ответ**:

  - **Успех**: 201 Created — пользователь успешно зарегистрирован.
  - **Ошибка**: 400 Bad Request — ошибка валидации данных (например, некорректный формат или уже существующий пользователь).

---

### Вход пользователя

- **Запрос**:

  - **Метод**: POST
  - **URL**: `/api/v1/SignIn`
  - **Тело запроса**:
    ```json
    {
      "name": "username",
      "password": "password"
    }
    ```
  
- **Ответ**:

  - **Успех**: 200 OK — пользователь успешно авторизован, в ответе может быть возвращен JWT токен.
  - **Ошибка**: 401 Unauthorized — неверные учетные данные (неверное имя пользователя или пароль).

## Документы

### Получение всех документов

- **Запрос**:

  - **Метод**: GET
  - **URL**: `/api/v1/Documents`
  
- **Ответ**:

  - **Успех**: 200 OK — список всех документов.
  - **Ошибка**: 500 Internal Server Error — ошибка на сервере, не удалось получить документы.

---

### Создание документа

- **Запрос**:

  - **Метод**: POST
  - **URL**: `/api/v1/Documents`
  - **Тело запроса**:
    ```json
    {
      "title": "Document Title",
      "category": "Category",
      "has_comments": true
    }
    ```
  
- **Ответ**:

  - **Успех**: 201 Created — документ успешно создан.
  - **Ошибка**: 400 Bad Request — ошибка валидации данных (например, отсутствуют обязательные поля или неправильно задан формат).

## Комментарии

### Получение комментариев к документу

- **Запрос**:

  - **Метод**: GET
  - **URL**: `/api/v1/Document/:documentId/Comments`
  - `:documentId` — уникальный идентификатор документа, для которого нужно получить комментарии.
  
- **Ответ**:

  - **Успех**: 200 OK — список комментариев к указанному документу.
  - **Ошибка**: 500 Internal Server Error — ошибка на сервере при попытке получить комментарии.

---

### Добавление комментария к документу

- **Запрос**:

  - **Метод**: POST
  - **URL**: `/api/v1/Document/:documentId/Comments`
  - `:documentId` — уникальный идентификатор документа, к которому добавляется комментарий.
  - **Тело запроса**:
    ```json
    {
      "text": "Comment text",
      "author": "Author"
    }
    ```

- **Ответ**:

  - **Успех**: 201 Created — комментарий успешно добавлен.
  - **Ошибка**: 400 Bad Request — ошибка валидации данных (например, пустое поле текста комментария или отсутствует автор).
